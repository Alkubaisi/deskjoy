  <div class="newspacewrapper" id="new-booking-form">
  <div class="form-inputs">
    <div class="add-form">
      <h3 class="text-center">Book a Desk</h3>
      <%= simple_form_for [@space, @booking] do |f| %>
      <%= f.error_notification %>
      <%= f.association :table, collection: @space.tables.map{|t| ["Desk number: #{t.id}", t.id, data: { price: t.price }] }  %>
      <div class="form-group">
        <span>From:</span>
        <div class='input-group date' id='bookingdate-from'>
          <input type="text" class="input-sm form-control" name="start" />
          <span class="input-group-addon">
            <span class="glyphicon glyphicon-calendar"></span>
          </span>
        </div>
      </div>

      <div class="form-group">
        <span>To:</span>
        <div class='input-group date' id='bookingdate-to'>
         <input type="text" class="input-sm form-control" name="end" />
          <span class="input-group-addon">
            <span class="glyphicon glyphicon-calendar"></span>
          </span>
        </div>
      </div>

      <hr>

      <h4 class="text-center">Booking Summary</h4>
      <p><%= @space.address %></p>


      <p>TOTAL COST:  Â£<span id='booking-price'>0</span></p>

      <div class="form-actions">
        <%= f.submit "Book now", {class: "btn btn-primary" } %>
      </div>
      <% end %>
    </div>
  </div>
</div>


<%= content_for(:after_js) do %>
  <script>
    $('#new_booking .form-control').on('change', function(){
      var start = $('#bookingdate-from').datepicker('getDate');
      var end = $('#bookingdate-to').datepicker('getDate');
      var tablePrice = $('#booking_table_id option:selected').data('price');

      if (start && end) {
        nbDays = (end - start) / (24 * 60 * 60 * 1000)
        if (nbDays > 0 && tablePrice) {
          bookingPrice = nbDays * tablePrice;
          $('#booking-price').html(bookingPrice);
        }
      }
    });
  </script>
<% end %>
